<div class="bg-white rounded-xl shadow-md overflow-hidden">
  <div class="border-b border-gray-200">
    <div class="flex justify-between items-center p-4">
      <h2 class="text-xl font-bold chat-title">Event Chat</h2>
      <div class="flex items-center space-x-2">
        <span class="text-sm text-gray-600 online-count"><i class="fas fa-user mr-1"></i> <span class="count-num">0</span> online</span>
        <button class="text-gray-600 hover:text-gray-900 chat-toggle-btn">
          <i class="fas fa-chevron-up"></i>
        </button>
      </div>
    </div>
  </div>
  
  <div class="chat-container">
    <!-- Messages Container -->
    <div class="messages-container h-96 overflow-y-auto p-4 bg-gray-50" id="messages-container">
      <div class="text-center py-4 chat-start-message">
        <div class="inline-block rounded-full bg-gray-200 p-3 mb-2">
          <i class="fas fa-comments text-gray-500"></i>
        </div>
        <p class="text-gray-500">Welcome to the event chat! Connect with other attendees.</p>
      </div>
      <!-- Messages will be inserted here -->
      <div id="messages-list" class="space-y-3"></div>
      
      <!-- Typing indicator -->
      <div id="typing-indicator" class="text-gray-500 text-sm py-1 hidden">
        <div class="flex items-center">
          <div class="typing-animation mr-2">
            <span></span>
            <span></span>
            <span></span>
          </div>
          <span class="typing-text">Someone is typing...</span>
        </div>
      </div>
    </div>
    
    <!-- Message Input -->
    <div class="message-input-container border-t border-gray-200 p-3">
      <form id="message-form" class="relative">
        <div class="flex items-center">
          <button type="button" id="media-upload-btn" class="p-2 text-gray-500 hover:text-purple-600">
            <i class="fas fa-image"></i>
          </button>
          <input type="text" id="message-input" class="flex-grow p-2 border border-gray-300 rounded-lg" placeholder="Type a message...">
          <button type="submit" class="ml-2 p-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">
            <i class="fas fa-paper-plane"></i>
          </button>
        </div>
        <!-- Media preview -->
        <div id="media-preview" class="hidden mt-2 relative bg-gray-100 rounded-lg p-2">
          <div class="flex items-center">
            <div class="w-16 h-16 overflow-hidden rounded-lg mr-2">
              <img id="media-preview-image" src="" alt="Media preview" class="w-full h-full object-cover">
            </div>
            <div class="flex-grow">
              <p id="media-preview-name" class="text-sm truncate"></p>
              <button type="button" id="media-remove-btn" class="text-xs text-red-600 hover:text-red-800">
                Remove
              </button>
            </div>
          </div>
        </div>
        <input type="file" id="media-upload-input" class="hidden" accept="image/*,video/*">
      </form>
    </div>
  </div>
</div>

<style>

  /* Message menu styles */
.message-context-menu {
  z-index: 10;
}

.message-menu-btn {
  border-radius: 50%;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: opacity 0.2s ease;
}

.message-menu-btn:hover {
  background-color: rgba(0, 0, 0, 0.1);
}

.message-menu-dropdown {
  min-width: 120px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  z-index: 20;
}

/* For hovering to reveal menu button */
.group:hover .opacity-0 {
  opacity: 1 !important;
}

  /* Typing indicator animation */
  .typing-animation {
    display: inline-flex;
    align-items: center;
  }
  
  .typing-animation span {
    height: 6px;
    width: 6px;
    margin: 0 1px;
    background-color: #9CA3AF;
    border-radius: 50%;
    display: inline-block;
    animation: typing-dot 1.4s infinite ease-in-out both;
  }
  
  .typing-animation span:nth-child(1) {
    animation-delay: -0.32s;
  }
  
  .typing-animation span:nth-child(2) {
    animation-delay: -0.16s;
  }
  
  @keyframes typing-dot {
    0%, 80%, 100% { transform: scale(0); opacity: 0.5; }
    40% { transform: scale(1); opacity: 1; }
  }
  
  /* Message styles */
  .message-bubble {
    max-width: 80%;
    word-break: break-word;
  }
  
  .message-bubble.outgoing {
    background-color: #8B5CF6;
    color: white;
    border-radius: 16px 16px 4px 16px;
    align-self: flex-end;
  }
  
  .message-bubble.incoming {
    background-color: #E5E7EB;
    color: #1F2937;
    border-radius: 16px 16px 16px 4px;
    align-self: flex-start;
  }
  
  .message-timestamp {
    font-size: 0.7rem;
    margin-top: 2px;
  }
</style>